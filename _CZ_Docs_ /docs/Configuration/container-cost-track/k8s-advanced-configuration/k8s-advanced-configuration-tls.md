---
title: Kubernetes TLS
category: features
createdAt: '2024-07-03T15:21:27.220Z'
hidden: false
slug: k8s-advanced-configuration-tls
updatedAt: '2024-12-11T15:24:58.439Z'
---
The CloudZero Agent for Kubernetes allows you to configure custom certificates to match your security policies.

This is an advanced configuration setting. Refer to the [Advanced Configuration](/docs/k8s-advanced-configuration) section of the documentation to get started.

The steps to provide a sustom TLS certificate follow:

1. Add the following to your `values.yaml` file and re-deploy.

```yaml values.yaml
insightsController:
  tls:
    # -- If disabled, the insights controller will not mount a TLS certificate from a Secret, and the user is responsible for configuring a method of providing TLS information to the webhook-server container.
    enabled: true
    # -- If left as an empty string, the certificate will be generated by the chart. Otherwise, the provided value will be used.
    crt: ""
    # -- If left as an empty string, the certificate private key will be generated by the chart. Otherwise, the provided value will be used.
    key: ""
    secret:
      # -- If set to true, a Secret will be created to store the TLS certificate and key.
      create: true
      # -- If set, the Secret will be created with this name. Otherwise, a default name will be generated.
      name: ""
    # -- The following TLS certificate information is for a self signed certificate. It is used as a default value for the validating admission webhook and the webhook server.
    # -- This path determines the location within the container where the TLS certificate and key will be mounted.
    mountPath: /etc/certs
    # -- This is the caBundle used by the Validating Admission Webhook when sending requests to the webhook server. If left empty, the default self-signed certificate will be used.
    # Set this value to an empty string if using cert-manager to manage the certificate instead. Otherwise, set this to the base64 encoded caBundle of the desired certificate.
    caBundle: ""
    # -- If enabled, the certificate will be managed by cert-manager, which must already be present in the cluster.
    # If disabled, a default self-signed certificate will be used.
    useCertManager: false
```

2. Re-deploy the Agent with your updated values file.

```shell
helm upgrade --install cloudzero \
    --repo https://cloudzero.github.io/cloudzero-charts cloudzero-agent \
    --namespace cloudzero --create-namespace -f values.yaml
```
